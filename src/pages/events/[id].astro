---
export async function getStaticPaths() {
  // Hardcoded event IDs to ensure we generate all routes at build time
  return [
    { params: { id: 'ethprague2025' } },
    { params: { id: 'ethglobal' } },
    { params: { id: 'protolayers' } },
    { params: { id: 'howtodao' } },
    { params: { id: 'meetup' } }
  ];
}

const { id } = Astro.params;
let event;

// Default fallback data for each event
const fallbackData = {
  'ethprague2025': {
    name: "ETHPrague 2025",
    date: "May 27-29, 2025",
    location: "Prague, Czech Republic",
    description: "ETHPrague is a leading Ethereum conference focusing on innovation, development, and the future of web3. Join developers, entrepreneurs, and enthusiasts for three days of talks, workshops, and networking in the heart of Prague.",
    organizers: ["ETHPrague Team"],
    website: "https://ethprague.com"
  },
  'ethglobal': {
    name: "ETHGlobal Hackathon",
    date: "May 30 - June 1, 2025",
    location: "Cubex Centrum Praha, Prague, Czech Republic",
    description: "Join the world's premier Ethereum hackathon where developers collaborate to build innovative decentralized applications. With over $175,000 in prizes and support from industry leaders, this is your chance to turn your ideas into reality. The event features technical mentorship, workshops, exclusive swag, curated content, and free food & drinks.",
    organizers: ["ETHGlobal"],
    website: "https://ethglobal.com/events/prague",
    venue: {
      name: "Cubex Centrum Praha",
      address: "Na Strži 2097/63, 140 00 Praha 4-Nusle, Czechia"
    },
    prizes: "$175,000 available in prizes from sponsors including Blockscout, 1inch, LayerZero, Flow, Pyth Network, Chainlink, and more"
  },
  'protolayers': {
    name: "ProtoLayers Ethereum R&D Event",
    date: "May 26, 2025",
    location: "Prague, Czech Republic",
    description: "Join ProtoLayers for a deep dive into cutting-edge Ethereum research and development. This focused event brings together researchers and developers to discuss the latest advances in Ethereum protocol, layer-2 solutions, and scaling technologies.",
    organizers: ["Damsky", "ProtoLayers Team"],
    website: "https://protolayers.org"
  },
  'howtodao': {
    name: "How to DAO Workshop",
    date: "May 28, 2025",
    location: "Prague, Czech Republic",
    description: "Learn how to create, govern, and participate in Decentralized Autonomous Organizations (DAOs) with experts Jan Puncar and Kevin Owocki. This hands-on workshop will cover practical aspects of DAO creation, governance mechanisms, treasury management, and real-world use cases.",
    organizers: ["Jan Puncar", "Kevin Owocki"],
    website: "https://howtodao.eth"
  },
  'meetup': {
    name: "EthCzech Community Meetup",
    date: "May 29, 2025",
    location: "Paralelní Polis, Prague, Czech Republic",
    description: "Join the local Ethereum community for an evening of networking, short presentations, and discussions. This is a great opportunity to meet like-minded enthusiasts, developers, and entrepreneurs who are building the future of Web3 in the Czech Republic and beyond.",
    organizers: ["EthCzech Community"],
    website: "https://ethczech.com",
    sponsors: ["Paralelní Polis", "BeerFi"]
  }
};

// Try to fetch data, fall back to hardcoded data if fetch fails
try {
  const response = await fetch(`https://raw.githubusercontent.com/EthCzech/czechcryptoweek/main/events/${id}/info.json`);
  event = await response.json();
} catch (error) {
  console.error(`Error fetching data for event ${id}:`, error);
  event = fallbackData[id];
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{event.name} | Czech Crypto Week</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        margin-bottom: 30px;
      }
      h1 {
        color: #0066cc;
        margin-bottom: 10px;
      }
      .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: #666;
        text-decoration: none;
      }
      .back-link:hover {
        text-decoration: underline;
      }
      .event-details {
        display: grid;
        grid-template-columns: max-content 1fr;
        gap: 10px;
        margin-bottom: 20px;
        background: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .label {
        font-weight: bold;
        color: #666;
      }
      .description {
        background: #f0f0f0;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .website-link {
        display: inline-block;
        background: #0066cc;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        margin-top: 20px;
        transition: background 0.2s;
      }
      .website-link:hover {
        background: #004c99;
      }
      .venue {
        margin-top: 20px;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
    </style>
  </head>
  <body>
    <header>
      <a href="/" class="back-link">← Back to all events</a>
      <h1>{event.name}</h1>
    </header>
    
    <div class="event-details">
      <span class="label">Date:</span>
      <span>{event.date}</span>
      
      <span class="label">Location:</span>
      <span>{event.location}</span>
      
      <span class="label">Organizers:</span>
      <span>{event.organizers.join(', ')}</span>
    </div>
    
    <div class="description">
      <p>{event.description}</p>
    </div>
    
    <a href={event.website} target="_blank" class="website-link">Visit Official Website</a>
    
    {event.venue && (
      <div class="venue">
        <h2>Venue Information</h2>
        <p><strong>Name:</strong> {event.venue.name}</p>
        <p><strong>Address:</strong> {event.venue.address}</p>
      </div>
    )}
    
    {event.prizes && (
      <div class="venue">
        <h2>Prizes</h2>
        <p>{event.prizes}</p>
      </div>
    )}
    
    {event.sponsors && (
      <div class="venue">
        <h2>Sponsors</h2>
        <p>{event.sponsors.join(', ')}</p>
      </div>
    )}
  </body>
</html> 